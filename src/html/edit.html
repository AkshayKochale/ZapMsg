<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <link rel="stylesheet" href="../css/register.css">
    <link rel="stylesheet" href="../css/common.css">
    <script src="../component/main.js"></script>
    <script src="../component/common.js"></script>
</head>
<body>

    <div class="mainloaderClass" id="mainloaderClass" style="display: none;">
        <div class="lds-dual-ring"></div>
      <div class="lds-ring"></div>
        </div>
    <div class="container">
        <div class="form-content">
            <div class="header">
                <img  class="header-logo" src="../assets/thunderIcon.svg" alt=""/>
                <div class="header-title">ZapMsg</div>
            </div>

            <div class="title-content">
            <h2>Edit Profile</h2>
            <button class="cancel-btn1" onclick="toggleLogin()">&#10005;</button> </div>
            <form id="updateForm" onsubmit="updateRegistration(event,false)">
                <div class="input-group">
                    <div class="input-half">
                        <label for="firstname">First Name: <span class="required">*</span></label>
                        <input type="text" id="firstname" name="firstname" required placeholder="Enter Your First Name">
                    </div>
                    <div class="input-half">
                        <label for="lastname">Last Name: <span class="required">*</span></label>
                        <input type="text" id="lastname" name="lastname" required placeholder="Enter Your Last Name">
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-half">
                        <label for="username">Username: <span class="required">*</span>
                         </label>
                        <input type="text" id="username" name="username" required readonly minlength="4" maxlength="12" oninput="validateUserName()" placeholder="Enter Your Username">
                    </div>
                    <div class="input-half">
                        <span class="validClass" id="validClass" style="display: none;">
                            <img class="validImg" width="25px" height="25px" src="../assets/greentick.svg"/></span> 
                            
                    <span class="invalidClass" id="invalidClass" style="display: none;"></span>
                    </div>
                    
                </div>


                
                <div class="input-group">
                    <div class="input-full">
                        <label for="email">Email: <span class="required">*</span></label>
                        <input type="email" id="email" name="email" required placeholder="Enter Your Email">
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-half">
                        <label for="password">Password: <span class="required">*</span><span id="passwordMsg" class="passwordMsg"></span></label>
                        <input type="password" id="password" name="password" required oninput="checkPassword()" placeholder="Enter Your Password">
                    </div>
                    <div class="input-half">
                        <label for="confirm-password">Confirm Password: <span class="required">*</span><span id="confirmPassMsg"></span> </label>
                        <input type="password" id="confirm-password" name="confirm-password" oninput="comparePassword()" required placeholder="Confirm Your Password">
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-half">
                        <label for="country">Country: <span class="required" >*</span></label>
                        <select id="country" name="country" required class="selectBox">
                            <option value="" disabled selected><div class="placeholder">Select your country</div></option>
                            <option value="USA">USA</option>
                            <option value="Canada">Canada</option>
                            <option value="UK">UK</option>
                            <option value="Australia">Australia</option>
                            <option value="Germany">Germany</option>
                            <option value="France">France</option>
                            <option value="India">India</option>
                            <option value="Japan">Japan</option>
                            <option value="Brazil">Brazil</option>
                            <option value="South Africa">South Africa</option>
                        </select>
                    </div>
                    <div class="input-half">
                        <label for="phone">Contact Number: <span class="required">*</span></label>
                        <input type="tel" id="phone" name="phone" required placeholder="Enter Your Contact Number">
                    </div>
                </div>
                <button type="submit" class="submit-btn">Submit</button>
            </form>
        </div>
    </div>
</body>
<script>

    function toggleLogin()
    {
        window.location.href="/src/html/dashboard.html";
        
    }


    window.onload =  async function() 
    {   
        startLoader();
        let inputData={
            token :gettokenfromlocalStorage()    
            };

         const apiData =await zapAPICaller("post",urlPrefixServices+"/registration/getprofileforedit",inputData,0);  

         if(apiData==null || apiData.status=="failed")
         {  
            stopLoader();
            showToastMsg("Failed", apiData.output, "Failed");
            return ;
         }
         
        populateForm(apiData);
        stopLoader();
        showToastMsg("Recommendation", "We Suggest Yout To Change Your Password", "success");
    };

    function populateForm(data) 
{
    document.getElementById("firstname").value = data.firstname || '';
    document.getElementById("lastname").value = data.lastname || '';
    document.getElementById("username").value = data.username || '';
    document.getElementById("email").value = data.email || '';
    document.getElementById("country").value = data.country || '';
    document.getElementById("phone").value = data.phone || '';
}

</script>
</html>
